<script lang="ts">
export default {
  type: 'page',
  data() {
    return {
      // reactive å¯¹è±¡
      user: {
        name: 'å¼ ä¸‰',
        age: 25,
        address: {
          city: 'åŒ—äº¬',
          district: 'æµ·æ·€åŒº',
        },
      },
      // ref åŸºæœ¬ç±»å‹
      count: 0,
      message: 'Hello WeVu',
      // æ•°ç»„
      items: ['è‹¹æœ', 'é¦™è•‰', 'æ©™å­'],
    }
  },
  methods: {
    updateName() {
      this.user.name = 'æå››'
    },
    updateAge() {
      this.user.age += 1
    },
    updateCity() {
      this.user.address.city = 'ä¸Šæµ·'
    },
    increment() {
      this.count += 1
    },
    updateMessage() {
      this.message = `æ›´æ–°æ—¶é—´: ${new Date().toLocaleTimeString()}`
    },
    addItem() {
      this.items.push(`æ–°é¡¹ç›® ${this.items.length + 1}`)
    },
    removeItem() {
      if (this.items.length > 0) {
        this.items.pop()
      }
    },
    updateFirstItem() {
      if (this.items.length > 0) {
        this.items[0] = 'ä¿®æ”¹åçš„ç¬¬ä¸€é¡¹'
      }
    },
  },
}
</script>

<template>
  <view class="container">
    <view class="page-title">åŸºç¡€å“åº”å¼</view>

    <view class="section">
      <view class="section-title">Reactive å¯¹è±¡å“åº”å¼</view>
      <view class="demo-item">
        <text class="label">å§“å: {{user.name}}</text>
        <button class="btn btn-primary" @click="updateName">ä¿®æ”¹å§“å</button>
      </view>
      <view class="demo-item">
        <text class="label">å¹´é¾„: {{user.age}}</text>
        <button class="btn btn-primary" @click="updateAge">å¢åŠ å¹´é¾„</button>
      </view>
      <view class="demo-item">
        <text class="label">åŸå¸‚: {{user.address.city}}</text>
        <button class="btn btn-primary" @click="updateCity">ä¿®æ”¹åŸå¸‚</button>
      </view>
    </view>

    <view class="section">
      <view class="section-title">Ref åŸºæœ¬ç±»å‹å“åº”å¼</view>
      <view class="demo-item">
        <text class="label">è®¡æ•°: {{count}}</text>
        <button class="btn btn-success" @click="increment">+1</button>
      </view>
      <view class="demo-item">
        <text class="label">{{message}}</text>
        <button class="btn btn-success" @click="updateMessage">æ›´æ–°æ¶ˆæ¯</button>
      </view>
    </view>

    <view class="section">
      <view class="section-title">æ•°ç»„å“åº”å¼</view>
      <view class="demo-item">
        <text class="label">é¡¹ç›®æ•°é‡: {{items.length}}</text>
      </view>
      <view class="items-list">
        <view v-for="(item, index) in items" :key="index" class="item-row">
          <text>{{index + 1}}. {{item}}</text>
        </view>
      </view>
      <view class="btn-group">
        <button class="btn btn-info" @click="addItem">æ·»åŠ é¡¹ç›®</button>
        <button class="btn btn-warning" @click="removeItem">åˆ é™¤æœ€åä¸€é¡¹</button>
        <button class="btn btn-info" @click="updateFirstItem">ä¿®æ”¹ç¬¬ä¸€é¡¹</button>
      </view>
    </view>

    <view class="tip">
      <text class="tip-text">ğŸ’¡ æç¤º: æ‰€æœ‰æ•°æ®å˜åŒ–éƒ½ä¼šè‡ªåŠ¨åŒæ­¥åˆ°è§†å›¾</text>
    </view>
  </view>
</template>

<style>
/* stylelint-disable order/properties-order */
.demo-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 24rpx 0;
  border-bottom: 1rpx solid #eee;
}

.demo-item:last-child {
  border-bottom: none;
}

.label {
  font-size: 28rpx;
  color: #333;
}

.items-list {
  margin: 24rpx 0;
}

.item-row {
  padding: 16rpx;
  background: #f5f7fa;
  border-radius: 8rpx;
  margin-bottom: 12rpx;
  font-size: 26rpx;
  color: #666;
}

.btn-group {
  display: flex;
  gap: 16rpx;
  margin-top: 24rpx;
}

.btn-group .btn {
  flex: 1;
}

.tip {
  margin-top: 32rpx;
  padding: 24rpx;
  background: #fff3cd;
  border-radius: 12rpx;
  border-left: 4rpx solid #ffc107;
}

.tip-text {
  font-size: 26rpx;
  color: #856404;
}
/* stylelint-enable order/properties-order */
</style>

<config lang="json">
{
  "navigationBarTitleText": "åŸºç¡€å“åº”å¼"
}
</config>
