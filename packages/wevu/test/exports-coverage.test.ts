import { describe, expect, it } from 'vitest'
import * as root from '@/index'
import * as reactivity from '@/reactivity'
import * as runtime from '@/runtime'
import * as store from '@/store'

const ROOT_RUNTIME_EXPORTS = [
  'addMutationRecorder',
  'batch',
  'callHookList',
  'callHookReturn',
  'callUpdateHooks',
  'computed',
  'createApp',
  'createStore',
  'createWevuComponent',
  'createWevuScopedSlotComponent',
  'customRef',
  'defineComponent',
  'defineStore',
  'effect',
  'effectScope',
  'endBatch',
  'getCurrentInstance',
  'getCurrentScope',
  'getCurrentSetupContext',
  'getDeepWatchStrategy',
  'getReactiveVersion',
  'inject',
  'injectGlobal',
  'isNoSetData',
  'isRaw',
  'isReactive',
  'isRef',
  'isShallowReactive',
  'isShallowRef',
  'markNoSetData',
  'markRaw',
  'mergeModels',
  'mountRuntimeInstance',
  'nextTick',
  'normalizeClass',
  'normalizeStyle',
  'onActivated',
  'onAddToFavorites',
  'onAttached',
  'onBeforeMount',
  'onBeforeUnmount',
  'onBeforeUpdate',
  'onDeactivated',
  'onDetached',
  'onError',
  'onErrorCaptured',
  'onHide',
  'onLaunch',
  'onLoad',
  'onMounted',
  'onMoved',
  'onPageNotFound',
  'onPageScroll',
  'onPullDownRefresh',
  'onReachBottom',
  'onReady',
  'onResize',
  'onRouteDone',
  'onSaveExitState',
  'onScopeDispose',
  'onServerPrefetch',
  'onShareAppMessage',
  'onShareTimeline',
  'onShow',
  'onTabItemTap',
  'onThemeChange',
  'onUnhandledRejection',
  'onUnload',
  'onUnmounted',
  'onUpdated',
  'prelinkReactiveTree',
  'provide',
  'provideGlobal',
  'reactive',
  'readonly',
  'ref',
  'registerApp',
  'registerComponent',
  'removeMutationRecorder',
  'resetWevuDefaults',
  'runSetupFunction',
  'setCurrentInstance',
  'setCurrentSetupContext',
  'setDeepWatchStrategy',
  'setWevuDefaults',
  'shallowReactive',
  'shallowRef',
  'startBatch',
  'stop',
  'storeToRefs',
  'teardownRuntimeInstance',
  'toRaw',
  'toRef',
  'toRefs',
  'toValue',
  'touchReactive',
  'traverse',
  'triggerRef',
  'unref',
  'useAttrs',
  'useBindModel',
  'useModel',
  'useNativeInstance',
  'useSlots',
  'useTemplateRef',
  'watch',
  'watchEffect',
] as const

describe('export barrels', () => {
  it('loads public exports', () => {
    expect(reactivity).toBeTruthy()
    expect(runtime).toBeTruthy()
    expect(store).toBeTruthy()
    expect(root).toBeTruthy()
  })

  it('covers all runtime exports of root entry', () => {
    const keys = Object.keys(root).sort()
    expect(keys).toEqual(ROOT_RUNTIME_EXPORTS)
  })
})
