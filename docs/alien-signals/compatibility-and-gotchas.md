# 兼容性与注意事项

语义与一致性

- 计算时机：computed 默认为惰性；仅在读取或其消费者需要时执行。
- 去抖/节流：不内置；如需对频繁写入做节制，请在外层组合（scheduler 只是批量与去重）。
- 比较：通常使用 Object.is 判断新旧值；NaN/±0 等保持一致语义。

清理与内存

- effect 停止时应从所有依赖的 subscribers 移除；若持有大量短生命订阅，建议封装“作用域自动清理”工具。
- computed 的依赖边在重算时更新；避免在 compute 内部“动态切换大量依赖”造成过多 churn。

调试与可观测性

- 由于实现尽量减少封装/装箱，内省/调试工具较少；推荐在开发模式下加“订阅计数/版本快照”辅助信息（不影响生产路径）。

与 UI 框架集成

- 直接驱动小程序/DOM 组件，需要在边界上把 effect 的变更转成 setData/update 等调用；保持边界细粒度可获取最佳收益。
- 与虚拟 DOM 结合时，尽量以信号切分渲染边界（局部子树 effect）而非全量重渲染。
