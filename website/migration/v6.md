# 从 v5 升级到 v6

> 核心提醒：想在小程序中使用 Vue SFC，需要安装 wevu 运行时，并确保 Volar 插件就绪。

## 升级步骤

1. **升级依赖**

   ```sh
   pnpm up weapp-vite@latest
   pnpm install
   ```

2. **安装 wevu（开启 Vue SFC 能力）**
   - 安装 `wevu`：

     ::: code-group

     ```sh [pnpm]
     pnpm add -D wevu
     ```

     ```sh [yarn]
     yarn add -D wevu
     ```

     ```sh [npm]
     npm i -D wevu
     ```

     ```sh [bun]
     bun add -D wevu
     ```

     :::

   - 在页面/组件中直接从 `wevu` 导入 `defineComponent/ref/reactive` 等 API（页面也直接使用 `defineComponent(...)`）。
   - 旧的外置 Vue 插件已不再需要。

3. **Volar/类型提示检查**
   - 确认 `tsconfig.app.json`（或项目主 `tsconfig.json`）里已包含：
     ```json
     {
       "vueCompilerOptions": {
         "plugins": ["weapp-vite/volar"]
       }
     }
     ```
   - VSCode 安装 “Vue - Official (Volar)” 扩展，必要时重启 TS Server。

## 变更要点

- weapp-vite 内置 Vue SFC 编译链；无需额外插件。
- Vue SFC 运行依赖 wevu，请显式安装并从主入口导入。
- 其余配置与 v5 基本兼容，原生小程序代码无须改动。
